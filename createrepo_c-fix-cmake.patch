diff -Naur createrepo_c-0.10.0/src/CMakeLists.txt createrepo_c-0.10.0.tpg/src/CMakeLists.txt
--- createrepo_c-0.10.0/src/CMakeLists.txt	2016-01-05 12:46:28.000000000 +0000
+++ createrepo_c-0.10.0.tpg/src/CMakeLists.txt	2016-03-07 22:38:59.522509748 +0000
@@ -2,7 +2,9 @@
      checksum.c
      compression_wrapper.c
      createrepo_shared.c
+     IF (DRPM_LIBRARY)
      deltarpms.c
+     ENDIF (DRPM_LIBRARY)
      dumper_thread.c
      error.c
      helpers.c
@@ -18,7 +20,9 @@
      threads.c
      updateinfo.c
      xml_dump.c
+     IF (DRPM_LIBRARY)
      xml_dump_deltapackage.c
+     ENDIF (DRPM_LIBRARY)
      xml_dump_filelists.c
      xml_dump_other.c
      xml_dump_primary.c
@@ -37,7 +41,9 @@
     compression_wrapper.h
     constants.h
     createrepo_c.h
+    IF (DRPM_LIBRARY)
     deltarpms.h
+    ENDIF (DRPM_LIBRARY)
     error.h
     helpers.h
     load_metadata.h
@@ -105,8 +111,9 @@
 
 CONFIGURE_FILE("createrepo_c.pc.cmake" "${CMAKE_SOURCE_DIR}/src/createrepo_c.pc" @ONLY)
 CONFIGURE_FILE("version.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/version.h" @ONLY)
-CONFIGURE_FILE("deltarpms.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/deltarpms.h" @ONLY)
-
+IF (DRPM_LIBRARY)
+    CONFIGURE_FILE("deltarpms.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/deltarpms.h" @ONLY)
+ENDIF
 IF (CMAKE_SIZEOF_VOID_P MATCHES "8")
     SET (LIB_SUFFIX "64")
 ENDIF (CMAKE_SIZEOF_VOID_P MATCHES "8")
diff -Naur createrepo_c-0.10.0/tests/createrepo/CMakeLists.txt createrepo_c-0.10.0.tpg/tests/createrepo/CMakeLists.txt
--- createrepo_c-0.10.0/tests/createrepo/CMakeLists.txt	2016-01-05 12:46:28.000000000 +0000
+++ createrepo_c-0.10.0.tpg/tests/createrepo/CMakeLists.txt	2016-03-07 22:38:59.522509748 +0000
@@ -2,7 +2,9 @@
      checksum.c
      compression_wrapper.c
      createrepo_shared.c
+     IF (DRPM_LIBRARY)
      deltarpms.c
+     ENDIF (DRPM_LIBRARY)
      dumper_thread.c
      error.c
      helpers.c
@@ -18,7 +20,9 @@
      threads.c
      updateinfo.c
      xml_dump.c
+     IF (DRPM_LIBRARY)
      xml_dump_deltapackage.c
+     ENDIF (DRPM_LIBRARY)
      xml_dump_filelists.c
      xml_dump_other.c
      xml_dump_primary.c
@@ -37,7 +41,9 @@
     compression_wrapper.h
     constants.h
     createrepo_c.h
+    IF (DRPM_LIBRARY)
     deltarpms.h
+    ENDIF (DRPM_LIBRARY)
     error.h
     helpers.h
     load_metadata.h
@@ -105,8 +111,9 @@
 
 CONFIGURE_FILE("createrepo_c.pc.cmake" "${CMAKE_SOURCE_DIR}/src/createrepo_c.pc" @ONLY)
 CONFIGURE_FILE("version.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/version.h" @ONLY)
-CONFIGURE_FILE("deltarpms.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/deltarpms.h" @ONLY)
-
+IF (DRPM_LIBRARY)
+    CONFIGURE_FILE("deltarpms.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/deltarpms.h" @ONLY)
+ENDIF
 IF (CMAKE_SIZEOF_VOID_P MATCHES "8")
     SET (LIB_SUFFIX "64")
 ENDIF (CMAKE_SIZEOF_VOID_P MATCHES "8")
