diff -Naur createrepo_c-0.10.0/src/CMakeLists.txt createrepo_c-0.10.0.tpg/src/CMakeLists.txt
--- createrepo_c-0.10.0/src/CMakeLists.txt	2016-01-05 12:46:28.000000000 +0000
+++ createrepo_c-0.10.0.tpg/src/CMakeLists.txt	2016-03-09 23:36:11.185976540 +0000
@@ -105,8 +105,9 @@
 
 CONFIGURE_FILE("createrepo_c.pc.cmake" "${CMAKE_SOURCE_DIR}/src/createrepo_c.pc" @ONLY)
 CONFIGURE_FILE("version.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/version.h" @ONLY)
-CONFIGURE_FILE("deltarpms.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/deltarpms.h" @ONLY)
-
+IF (DRPM_LIBRARY)
+    CONFIGURE_FILE("deltarpms.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/deltarpms.h" @ONLY)
+ENDIF
 IF (CMAKE_SIZEOF_VOID_P MATCHES "8")
     SET (LIB_SUFFIX "64")
 ENDIF (CMAKE_SIZEOF_VOID_P MATCHES "8")
diff -Naur createrepo_c-0.10.0/tests/createrepo/CMakeLists.txt createrepo_c-0.10.0.tpg/tests/createrepo/CMakeLists.txt
--- createrepo_c-0.10.0/tests/createrepo/CMakeLists.txt	2016-01-05 12:46:28.000000000 +0000
+++ createrepo_c-0.10.0.tpg/tests/createrepo/CMakeLists.txt	2016-03-09 23:36:11.185976540 +0000
@@ -105,8 +105,9 @@
 
 CONFIGURE_FILE("createrepo_c.pc.cmake" "${CMAKE_SOURCE_DIR}/src/createrepo_c.pc" @ONLY)
 CONFIGURE_FILE("version.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/version.h" @ONLY)
-CONFIGURE_FILE("deltarpms.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/deltarpms.h" @ONLY)
-
+IF (DRPM_LIBRARY)
+    CONFIGURE_FILE("deltarpms.h.in" "${CMAKE_CURRENT_SOURCE_DIR}/deltarpms.h" @ONLY)
+ENDIF
 IF (CMAKE_SIZEOF_VOID_P MATCHES "8")
     SET (LIB_SUFFIX "64")
 ENDIF (CMAKE_SIZEOF_VOID_P MATCHES "8")
